# 测试文档-酒店管理员相关

[TOC]

## 1. 单元测试

### 1.1 用户界面层单元测试

#### 1.1.1 页面显示与跳转测试

```
   - 酒店列表界面
      - 酒店详情界面
   - 酒店管理界面
      - 酒店管理
         - 录入房间模态框
         - 添加优惠策略模态框
         - 修改酒店信息模态框
         - 发布促销公告模态框
      - 网站营销人员管理
         - 添加酒店工作人员模态框
      - 酒店订单管理
      	 - 订单详情模态框
      	 - 删除订单模态框
   - 个人信息管理
      - 个人信息管理
         - 修改个人信息模态框
         - 修改密码模态框
         - 升级VIP模态框
      - 用户信息管理
      	 - 添加用户模态框
      - 个人订单管理
      - 信用值变更记录

   测试结果：通过
```

#### 1.1.2 功能测试

##### 1.1.2.1 向业务层请求查看当前管理的酒店列表

| 触发条件         | 参数      | 预期结果                                                   | 测试结果 |
| ---------------- | --------- | ---------------------------------------------------------- | -------- |
| 访问酒店管理界面 | managerid | 浏览器向服务器发起/api/hotel/by-manager/${data.id} GET请求 | 通过     |

##### 1.1.2.2 收集并向业务层请求给指定酒店录入房间

| 触发条件         | 参数           | 预期结果                                       | 测试结果 |
| ---------------- | -------------- | ---------------------------------------------- | -------- |
| 点击录入房间按钮 | 收集的表单信息 | 浏览器向服务器发起/api/hotel/roomInfo POST请求 | 通过     |

测试数据：

		- 房型：大床房
		- 有无早餐：有
		- 房间数量：10
		- 入住人数：2
		- 原始价格：299

##### 1.1.2.3 向业务层请求显示指定酒店所有优惠策略

| 触发条件           | 参数    | 预期结果                                              | 测试结果 |
| ------------------ | ------- | ----------------------------------------------------- | -------- |
| 点击优惠策略       | hotelId | 浏览器向服务器发起/api/coupon/hotelAllCoupons GET请求 | 通过     |
| 完成添加优惠策略后 | hotelId | 浏览器向服务器发起/api/coupon/hotelAllCoupons GET请求 | 通过     |

##### 1.1.2.4 收集并向业务层请求给指定酒店添加优惠策略

| 触发条件         | 参数             | 预期结果                                          | 测试结果 |
| ---------------- | ---------------- | ------------------------------------------------- | -------- |
| 点击添加优惠策略 | 收集到的表单数据 | 浏览器向服务器发起/api/coupon/addCoupons POST请求 | 通过     |

测试数据：

		- 优惠券类型：满减优惠券
		-  优惠券名称：满100减50
		- 优惠券简介：满100减50
		- 达标金额：100
		- 优惠金额：50

##### 1.1.2.5 向业务层请求显示指定酒店的详细信息

| 触发条件         | 参数           | 预期结果                                          | 测试结果 |
| ---------------- | -------------- | ------------------------------------------------- | -------- |
| 点击修改信息按钮 | currentHotelId | 浏览器向服务器发起/api/hotel/data/details GET请求 | 通过     |
| 完成修改         | currentHotelId | 浏览器向服务器发起/api/hotel/data/details GET请求 | 通过     |

##### 1.1.2.6 收集并向业务层请求修改指定酒店的详细信息

| 触发条件             | 参数             | 预期结果                                       | 测试结果 |
| -------------------- | ---------------- | ---------------------------------------------- | -------- |
| 修改完后点击保存按钮 | 收集到的表单信息 | 浏览器向服务器发起/api/hotel/hotelInfo PUT请求 | 通过     |

##### 1.1.2.7 向业务层请求显示指定酒店的促销公告

| 触发条件         | 参数           | 预期结果                                          | 测试结果 |
| ---------------- | -------------- | ------------------------------------------------- | -------- |
| 点击促销公告按钮 | currentHotelId | 浏览器向服务器发起/api/hotel/data/details GET请求 | 通过     |
| 修改促销公告完成 | currentHotelId | 浏览器向服务器发起/api/hotel/data/details GET请求 | 通过     |

##### 1.1.2.8 收集并向业务层请求修改指定酒店的促销公告

| 触发条件             | 参数             | 预期结果                                       | 测试结果 |
| -------------------- | ---------------- | ---------------------------------------------- | -------- |
| 修改完后点击保存按钮 | 收集到的表单信息 | 浏览器向服务器发起/api/hotel/hotelInfo PUT请求 | 通过     |

##### 1.1.2.9 向业务层请求查看订单信息

| 触发条件             | 参数    | 预期结果                                                  | 测试结果 |
| -------------------- | ------- | --------------------------------------------------------- | -------- |
| 每次访问酒店管理界面 | data.id | 浏览器向服务器发起/api/order/by-manager/{data.id} GET请求 | 通过     |
| 删除订单之后         | data.id | 浏览器向服务器发起/api/order/by-manager/{data.id} GET请求 | 通过     |

##### 1.1.2.10 收集并向业务层请求删除指定订单

| 触发条件     | 参数    | 预期结果                                                 | 测试结果 |
| ------------ | ------- | -------------------------------------------------------- | -------- |
| 点击删除订单 | orderId | 浏览器向服务器发起/api/order/{orderId}/annuOrder GET请求 | 通过     |

### 1.2 业务逻辑层单元测试

#### 1.2.1 功能测试

##### 1.2.1.1 向业务层提供从数据层获取的酒店列表

| 触发条件                                | 参数 | 预期结果                         | 测试结果 |
| --------------------------------------- | ---- | -------------------------------- | -------- |
| 收到/api/hotel/by-manager/{data.id}请求 | id   | 向数据层请求酒店列表并返回给请求 | 通过     |

##### 1.2.1.2 向数据层请求存储从业务层获取的房间信息

| 触发条件                    | 参数      | 预期结果                             | 测试结果 |
| --------------------------- | --------- | ------------------------------------ | -------- |
| 收到/api/hotel/roomInfo请求 | room | 向数据层请求存储存储当前录入房间信息 | 通过     |

##### 1.2.1.3 向业务层提供从数据层获取的优惠券信息

| 触发条件                            | 参数    | 预期结果                               | 测试结果 |
| ----------------------------------- | ------- | -------------------------------------- | -------- |
| 收到/api/coupon/hotelAllCoupons请求 | hotelId | 向数据层请求所有优惠券信息并返回给请求 | 通过     |

##### 1.2.1.4 向数据库请求存储从业务层获取的优惠券信息

| 触发条件                      | 参数     | 预期结果                                   | 测试结果 |
| ----------------------------- | -------- | ------------------------------------------ | -------- |
| 收到/api/coupon/addCoupon请求 | CouponVO | 向数据层请求存储新增优惠券信息并返回给请求 | 通过     |

##### 1.2.1.5 向业务层提供从数据库获得的指定酒店详细信息

| 触发条件                        | 参数    | 预期结果                                 | 测试结果 |
| ------------------------------- | ------- | ---------------------------------------- | -------- |
| 收到/api/hotel/{hotelId}/detail | hotelId | 向数据层请求指定酒店详细信息并返回给请求 | 通过     |

##### 1.2.1.6 向数据库请求存储业务层修改后的酒店信息

| 触发条件                 | 参数    | 预期结果                                     | 测试结果 |
| ------------------------ | ------- | -------------------------------------------- | -------- |
| 收到/api/hotel/hotelInfo | hotelVO | 向数据库请求存储修改后的酒店信息并返回给请求 | 通过     |

##### 1.2.1.7 向业务层提供从数据库获得的指定酒店促销公告信息

| 触发条件                        | 参数    | 预期结果                                 | 测试结果 |
| ------------------------------- | ------- | ---------------------------------------- | -------- |
| 收到/api/hotel/{hotelId}/detail | hotelId | 向数据层请求指定酒店详细信息并返回给请求 | 通过     |

##### 1.2.1.8 向数据库请求存储业务层修改后的酒店促销公告

| 触发条件                 | 参数    | 预期结果                                     | 测试结果 |
| ------------------------ | ------- | -------------------------------------------- | -------- |
| 收到/api/hotel/hotelInfo | hotelVO | 向数据库请求存储修改后的酒店信息并返回给请求 | 通过     |

##### 1.2.1.9 向业务层提供从数据库获取的订单信息

| 触发条件                       | 参数      | 预期结果                                       | 测试结果 |
| ------------------------------ | --------- | ---------------------------------------------- | -------- |
| 收到/api/order/by-manager/{id} | managerId | 向数据层请求当前管理员所有订单信息并返回给请求 | 通过     |

##### 1.2.1.10 向数据库请求存储业务层更改的订单状态

| 触发条件                                | 参数    | 预期结果                                     | 测试结果 |
| --------------------------------------- | ------- | -------------------------------------------- | -------- |
| 收到/api/order/{orderId}/annulOrder请求 | orderId | 向数据库请求存储修改后的订单状态并返回给请求 | 通过     |

### 1.3 数据层单元测试

#### 1.3.1 功能测试

##### 1.3.1.1 向业务层提供酒店列表

| 触发条件                    | 参数      | 预期结果                         | 测试结果 |
| --------------------------- | --------- | -------------------------------- | -------- |
| 调用getHotelByManager()方法 | managerId | 返回当前管理员对应的所有酒店列表 | 通过     |

##### 1.3.1.2 存储录入房间信息

| 触发条件              | 参数      | 预期结果                     | 测试结果 |
| --------------------- | --------- | ---------------------------- | -------- |
| 调用addRoomInfo()方法 | room | 存储新录入的房间信息到Room表 | 通过     |

##### 1.3.1.3 向业务层提供对应酒店所有优惠券信息

| 触发条件                | 参数    | 预期结果                     | 测试结果 |
| ----------------------- | ------- | ---------------------------- | -------- |
| 调用getAllByHotel()方法 | hotelId | 返回当前酒店的所有优惠券列表 | 通过     |

##### 1.3.1.4 存储新增的优惠券

| 触发条件            | 参数     | 预期结果                 | 测试结果 |
| ------------------- | -------- | ------------------------ | -------- |
| 调用addCoupon()方法 | couponVO | 存储新增优惠券到Coupon表 | 通过     |

##### 1.3.1.5 向业务层提供指定酒店详细信息

| 触发条件                      | 参数    | 预期结果               | 测试结果 |
| ----------------------------- | ------- | ---------------------- | -------- |
| 调用retrieveHotelDetail()方法 | hotelId | 返回当前酒店的详细信息 | 通过     |

##### 1.3.1.6 存储修改后的酒店信息

| 触发条件                  | 参数    | 预期结果                      | 测试结果 |
| ------------------------- | ------- | ----------------------------- | -------- |
| 调用updateHotelInfo()方法 | hotelVO | 存储修改后的酒店信息到Hotel表 | 通过     |

##### 1.3.1.7 向业务层提供指定酒店的促销公告信息

| 触发条件                      | 参数    | 预期结果                   | 测试结果 |
| ----------------------------- | ------- | -------------------------- | -------- |
| 调用retrieveHotelDetail()方法 | hotelId | 返回当前酒店的促销公告信息 | 通过     |

##### 1.3.1.8 存储修改后的酒店促销公告信息

| 触发条件                  | 参数    | 预期结果                      | 测试结果 |
| ------------------------- | ------- | ----------------------------- | -------- |
| 调用updateHotelInfo()方法 | hotelVO | 存储修改后的酒店信息到Hotel表 | 通过     |

##### 1.3.1.9 向业务层提供当前管理员对应的订单列表

| 触发条件                    | 参数      | 预期结果                     | 测试结果 |
| --------------------------- | --------- | ---------------------------- | -------- |
| 调用getOrderByManager()方法 | managerId | 返回当前管理员对应的订单列表 | 通过     |

##### 1.3.1.10 存储删除后的订单状态

| 触发条件              | 参数    | 预期结果                       | 测试结果 |
| --------------------- | ------- | ------------------------------ | -------- |
| 调用annualOrder()方法 | orderId | 存储指定订单后删除后的订单状态 | 通过     |

## 2. 集成测试

### 2.1 功能测试

#### 2.1.1 显示当前管理员对应酒店列表

| 触发条件               | 参数     | 预期结果     | 测试结果 |
| ---------------------- | -------- | ------------ | -------- |
| 进入酒店管理界面       | 管理员id | 显示酒店列表 | 通过     |
| 点击下方酒店管理标签页 | 管理员id | 显示酒店列表 | 通过     |

#### 2.1.2 录入房间

| 触发条件                 | 参数     | 预期结果                   | 测试结果 |
| ------------------------ | -------- | -------------------------- | -------- |
| 点击列表中的录入房间按钮 | 无       | 显示录入房间表单           | 通过     |
| 填写表单并点击确认       | 房间信息 | 酒店房间列表增加新录入房间 | 通过     |

#### 2.1.3 显示当前酒店所有优惠券

| 触发条件                 | 参数   | 预期结果               | 测试结果 |
| ------------------------ | ------ | ---------------------- | -------- |
| 点击列表中的优惠策略按钮 | 酒店id | 显示当前酒店所有优惠券 | 通过     |

#### 2.1.4 增加优惠策略

| 触发条件           | 参数       | 预期结果                     | 测试结果 |
| ------------------ | ---------- | ---------------------------- | -------- |
| 点击添加优惠券按钮 | 无         | 优惠策略列表显示新增优惠策略 | 通过     |
| 填写表单并点击确认 | 优惠券信息 | 优惠策略列表显示新增优惠策略 | 通过     |

#### 2.1.5 显示酒店详细信息

| 触发条件                 | 参数   | 预期结果               | 测试结果 |
| ------------------------ | ------ | ---------------------- | -------- |
| 点击列表中的修改信息按钮 | 酒店id | 显示当前酒店的详细信息 | 通过     |

#### 2.1.6 修改酒店信息

| 触发条件                           | 参数     | 预期结果           | 测试结果 |
| ---------------------------------- | -------- | ------------------ | -------- |
| 点击修改信息后点击右下角的修改按钮 | 无       | 信息变为可编辑模式 | 通过     |
| 修改信息后点击下方保存按钮         | 酒店信息 | 酒店信息更新       | 通过     |

#### 2.1.7 显示酒店促销公告信息

| 触发条件                 | 参数   | 预期结果               | 测试结果 |
| ------------------------ | ------ | ---------------------- | -------- |
| 点击列表中的促销公告按钮 | 酒店id | 显示当前酒店的促销公告 | 通过     |

#### 2.1.8 修改酒店促销公告

| 触发条件                           | 参数             | 预期结果               | 测试结果 |
| ---------------------------------- | ---------------- | ---------------------- | -------- |
| 点击促销公告后点击右下角的修改按钮 | 无               | 促销公告变为可编辑模式 | 通过     |
| 修改促销公告后点击下方保存按钮     | 酒店促销公告信息 | 酒店促销公告信息更新   | 通过     |

#### 2.1.9 显示所有订单列表

| 触发条件           | 参数     | 预期结果     | 测试结果 |
| ------------------ | -------- | ------------ | -------- |
| 点击订单管理标签页 | 管理员id | 显示订单列表 | 通过     |

#### 2.1.10 查看指定订单详细信息

| 触发条件                               | 参数 | 预期结果     | 测试结果 |
| -------------------------------------- | ---- | ------------ | -------- |
| 进入订单管理界面后点击列表中的订单详情 | 无   | 显示订单详情 | 通过     |

#### 2.1.11 删除特定订单

| 触发条件                               | 参数   | 预期结果           | 测试结果 |
| -------------------------------------- | ------ | ------------------ | -------- |
| 进入订单管理界面后点击列表中的删除订单 | 订单id | 订单状态变为已撤销 | 通过     |

## 3. 文档修改历史

| 修改人员 | 日期       | 修改原因                                             | 版本号 |
| :------: | ---------- | ---------------------------------------------------- | ------ |
| 李镔达  | 2020.6.30 | 完成酒店管理员测试文档              | v1.0 |

